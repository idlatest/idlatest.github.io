---
import { getCollection } from 'astro:content'

import BlogPost from '../components/BlogPost.astro'

const allPosts = await getCollection('posts', ({ data }) => {
  return import.meta.env.PROD ? data.isDraft != true : true
})

const recentPosts = allPosts.sort((a,b) => new Date(b.data.publishDate) - new Date(a.data.publishDate)).slice(0, 4)
---
<div class="mt-12">

      <div class="font-xs font-light tracking-widest text-sm text-gray-600 dark:text-slate-300 leading-normal uppercase">Recent Posts</div>

    <ul>
      {recentPosts.map(post => <BlogPost post={post}/>)}
    </ul>
</div>
